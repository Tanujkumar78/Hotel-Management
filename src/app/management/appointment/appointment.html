<div class="appointment-container">
  <h2>Appointment Management</h2>

  <form (ngSubmit)="addAppointment()" class="appointment-form">
    <div>
      <label>Patient:</label>
      <select [(ngModel)]="newAppointment.patientId" name="patientId" required>
        <option value="">Select Patient</option>
        <option *ngFor="let p of patients" [value]="p.id">
          {{ p.name }}
        </option>
      </select>
    </div>

    <div>
      <label>Doctor:</label>
      <select [(ngModel)]="newAppointment.doctorId" name="doctorId" required>
        <option value="">Select Doctor</option>
        <option *ngFor="let d of doctors" [value]="d.id">
          {{ d.name }}
        </option>
      </select>
    </div>

    <div>
      <label>Date:</label>
      <input type="date" [(ngModel)]="newAppointment.date" name="date" required />
    </div>

    <div>
      <label>Time Slot:</label>
      <select [(ngModel)]="newAppointment.timeSlot" name="timeSlot" required>
        <option value="">Select Time Slot</option>
        <option>Morning</option>
        <option>Afternoon</option>
        <option>Evening</option>
      </select>
    </div>

    <button type="submit">Add Appointment</button>
  </form>

  <table class="appointment-table" *ngIf="appointments.length > 0">
    <thead>
      <tr>
        <th>ID</th>
        <th>Patient</th>
        <th>Doctor</th>
        <th>Date</th>
        <th>Time</th>
        <th>Status</th>
        <th>Change Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let app of appointments">
        <td>{{ app.id }}</td>
        <td>{{ app.patientName }}</td>
        <td>{{ app.doctorName }}</td>
        <td>{{ app.date }}</td>
        <td>{{ app.timeSlot }}</td>
        <td>{{ app.status }}</td>
        <td>
          <select
            #statusSelect
            (change)="updateStatus(app, statusSelect.value)"
            [value]="app.status"
          >
            <option>Scheduled</option>
            <option>Completed</option>
          </select>
        </td>
        <td>
          <button (click)="deleteAppointment(app.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
